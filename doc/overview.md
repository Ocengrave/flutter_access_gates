# –û–±–∑–æ—Ä: Flutter Access Gates

**Flutter Access Gates** ‚Äî —ç—Ç–æ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º –∫ UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–∏—á-—Ñ–ª–∞–≥–æ–≤, –ø—Ä–∞–≤, —Ä–æ–ª–µ–π –∏–ª–∏ –ª—é–±—ã—Ö –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π.

> üí° –í–º–µ—Å—Ç–æ `if (user.hasPermission(...))` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ `Gate`-–≤–∏–¥–∂–µ—Ç—ã –ø—Ä—è–º–æ –≤ —Ä–∞–∑–º–µ—Ç–∫–µ.

---

## –ß—Ç–æ —Ä–µ—à–∞–µ—Ç

- –•–æ—á–µ—à—å **—Å–ø—Ä—è—Ç–∞—Ç—å –∫–Ω–æ–ø–∫—É** –æ—Ç –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Ä–æ–ª–µ–π?
- –ü–æ–∫–∞–∑–∞—Ç—å —Ñ–∏—á—É —Ç–æ–ª—å–∫–æ –≤ `debug`?
- –ü–æ–∫–∞–∑–∞—Ç—å –±–ª–æ–∫ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤–∫–ª—é—á—ë–Ω–Ω–æ–º —Ñ–∏—á-—Ñ–ª–∞–≥–µ?
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±—É—é —Å–≤–æ—é –ª–æ–≥–∏–∫—É –¥–æ—Å—Ç—É–ø–∞?

**Access Gates** –¥–∞—é—Ç –≥–æ—Ç–æ–≤—ã–µ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–µ –≤–∏–¥–∂–µ—Ç—ã –¥–ª—è —ç—Ç–æ–≥–æ.

---

## –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç: `AccessGate<T>`

```dart
AccessGate<String>(
  input: 'admin',
  check: (ctx, role) => strategy.hasRole(ctx, role),
  child: Text('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, –∞–¥–º–∏–Ω!'),
  fallback: Text('–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞'),
)
```

- `input`: —á—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º (—Ä–æ–ª—å, permission, —Ñ–ª–∞–≥ –∏ —Ç.–¥.)
- `check`: —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ (–º–æ–∂–Ω–æ async)
- `child`: –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à—ë–Ω
- `fallback`: –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω
- `loading`: –ø–æ–∫–∞ –∂–¥—ë–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç

---

## –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≥–µ–π—Ç—ã

| –í–∏–¥–∂–µ—Ç                 | –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω                          |
|------------------------|-----------------------------------------|
| `RoleGate`             | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏                           |
| `PermissionGate`       | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞                   |
| `FeatureGate`          | –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∫–ª—é—á—ë–Ω–Ω–æ—Å—Ç–∏ —Ñ–ª–∞–≥–∞             |
| `CompositeAccessGate`  | –ù–µ—Å–∫–æ–ª—å–∫–æ —É—Å–ª–æ–≤–∏–π (AND)                 |
| `DebugGate`            | –¢–æ–ª—å–∫–æ –≤ debug-—Å–±–æ—Ä–∫–∞—Ö                  |
| `GateUiBuilder`        | –ö–∞—Å—Ç–æ–º–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞           |
| `SimpleFeatureGate`    | –ë–µ–∑ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, –ø—Ä–æ—Å—Ç–æ Map —Å —Ñ–ª–∞–≥–∞–º–∏     |

---

## –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚Äî –±–µ–∑ –±–æ–ª–∏

```dart
AccessGate<String>(
  input: 'edit',
  check: (ctx, perm) async => await api.hasPermission(perm),
  loading: CircularProgressIndicator(),
  fallback: Text('–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞'),
  child: Text('–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ'),
)
```
---

## –°—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–æ—Å—Ç—É–ø–∞ (`AccessStrategy`)

```dart
abstract class AccessStrategy {
  bool hasRole(BuildContext context, String role);
  bool hasPermission(BuildContext context, String permission);
  bool isFeatureEnabled(BuildContext context, String flag);
}
```

–¢—ã –º–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é:

```dart
AccessStrategyProvider(
  strategy: MyStrategy(),
  child: MyApp(),
)
```

–ò–ª–∏ –≤–æ–æ–±—â–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é ‚Äî `SimpleFeatureGate` —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ `Map<String, bool>`.

---

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

| –°—Ü–µ–Ω–∞—Ä–∏–π                          | –†–µ—à–µ–Ω–∏–µ                    |
|----------------------------------|----------------------------|
| –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É "–£–¥–∞–ª–∏—Ç—å"      | `PermissionGate(permission: 'delete')` |
| –ü–æ–∫–∞–∑–∞—Ç—å dev-—Ñ–∏—á—É                | `FeatureGate(flag: 'dev_console')` |
| –°–∫—Ä—ã—Ç—å –±–ª–æ–∫ –≤ —Ä–µ–ª–∏–∑–µ             | `DebugGate(child: ...)` |
| –°–≤–æ—è –ª–æ–≥–∏–∫–∞ –ø–æ jwt/–∫–æ–Ω—Ç–µ–∫—Å—Ç—É     | `AccessGate<T>` —Å –∫–∞—Å—Ç–æ–º–Ω–æ–π `check` |
| –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É—Å–ª–æ–≤–∏—è          | `CompositeAccessGate([...])` |

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- –î–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–¥–∞–≤–∞–π `loading`

---

## –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤–µ—Ä—Å–∏–∏ `0.2.3`

---